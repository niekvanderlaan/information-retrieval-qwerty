<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Pacifico">
    <link rel="icon" href="http://obj-cache.cloud.ruanbekker.com/favicon.ico">
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript">
      function view(headline, body) {

         var mywindow = window.open('', headline, 'height=400,width=600');
         mywindow.document.write('<html><head><title>{headline}</title>');

         //External Css will not work in print
         mywindow.document.write("<style>body{font-family:Arial}</style>");

         mywindow.document.write('</head><body><table>');
         mywindow.document.write(body);
         mywindow.document.write('</table></body></html>');

         mywindow.print();
         mywindow.close();

         return true;
       }
    </script>

    <script>
    $(document).ready(function(){
        $('.view').bind('click', function() {
            window.open('/view/'+$(this).attr('id'), '_blank');
        });
    });
</script>

    <title>Bookmarks Search</title>

  </head>
  <body>

  <div class="container">
    <div style="background:transparent !important" class="jumbotron">
      <div style="font-family: 'Pacifico', cursive;">
        <p>
          <center>
          <font size="8">Search for Blog Posts</font>
          </center>
        </p>
      </div>
    </div>

  <form action="/search/results" method="post">
    <div class="input-group">
      <input type="text" class="form-control input-lg" name="input" placeholder="Search"  autofocus>
      <div class="input-group-btn">
        <button class="btn btn-primary btn-lg" type="submit">
          <i class="glyphicon glyphicon-search"></i>
        </button>
      </div>
    </div>
  </form>

  <center>
      <h1>Results: ({{ res['hits']['total'] }}) </h1>
  </center>

  <table class="table">
    <thead>
      <tr>
        <th>Date Stamp</th>
        <th>Source</th>
        <th>Title</th>
        <th>Link</th>
      </tr>
    </thead>

{% for hit in res['hits']['hits'] %}
    <tbody>
      <tr>
        <th scope="row">{{ hit['_source']['datetime'] }}</th>
        <td>{{ hit['_index'] }}</td>
        <td>{{ hit['_source']['headline'] }}</td>
        <td><button class="view" id="{{ hit['_id'] }}">View</button></td>
      </tr>
    </tbody>
{% endfor %}
  </table>

        <footer class="footer">
          <p>&copy; 2019 Niek van der Laan & Daphne van Tetering</p>
        </footer>

      </div>
    </div>
  </body>
</html>